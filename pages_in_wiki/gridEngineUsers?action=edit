<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      gridEngineUsers (edit) – Research Computing Documentation
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/trac/doc/search" />
        <link rel="help" href="/trac/doc/wiki/TracGuide" />
        <link rel="start" href="/trac/doc/wiki" />
        <link rel="stylesheet" href="/trac/doc/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/doc/chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="f237668d71f45094cfd61076";
    </script>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/babel.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/search.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" /><script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#text").blur(function() {
          $("#scroll_bar_pos").val(this.scrollTop);
        }).get(0).scrollTop = $("#scroll_bar_pos").val();
        $("#editrows").change(function() {
          resizeTextArea("text", this.options[this.selectedIndex].value);
        });
      });
    </script>
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/style.css" />
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/homepage.css" />
<link rel="icon" type="image/ico" href="/favicon.ico" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="stylesheet" href="/includes/menu2.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="/trac/doc/chrome/site/style.css" />
</head>
  <body>
<div id="siteheader">
    <!-- Get rid of the old headers -->
    <div id="container">
        <div id="header2">
            <div id="banner2" valign="top">
                <div id="usf-logo" valign="top">
                    <img src="http://www.usf.edu/imagery/USF-Master-BANNER-art.jpg" width="600" height="86" border="0" usemap="#Map" />
                    <map name="Map" id="Map">
                        <area shape="rect" coords="12,11,347,75" href="/" />
                    </map>
                </div>
                <div id="container_search">
                    <ul>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://assistive.usablenet.com/tt/referrer"> Text-Only</a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="https://my.usf.edu/webapps/login/custom/bb_bb60/login.jsp?flag=1"> myUSF </a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="http://www.usf.edu/About-USF/azindex/index.asp"> A-Z Index </a> | </li>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://directory.acomp.usf.edu/?logo=1"> Directory</a></li>
                    </ul>
                    <form id="form1" value="Search" method="get" action="http://search.usf.edu/search" style="font-size:12px">
                        <input type="text" name="q" size="20" maxlength="256" value="" />
                        <input type="submit" name="btng" style="font-size:12px" value="Go" />
                        <input type="hidden" name="client" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="proxystylesheet" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="site" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="output" style="font-size:12px" value="xml_no_dtd" />
                        <input type="hidden" name="numgm" style="font-size:12px" value="5" />
                    </form>
                </div>
            </div>
            <div id="nav_topic">
                <ul id="nav_topic">
                    <li><a id="about" href="http://www.usf.edu/About-USF/index.asp">About USF</a></li>
                    <li><a id="academics" href="http://www.usf.edu/Academics/index.asp">Academics</a></li>
                    <li><a id="admissions" href="http://www.usf.edu/Admission/index.asp">Admissions</a></li>
                    <li><a id="campuslife" href="http://www.usf.edu/Campus-Life/index.asp">Campus Life</a></li>
                    <li><a id="research" href="http://www.usf.edu//Research/index.asp">Research</a></li>
                    <li><a href="http://system.usf.edu/">USF System</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script language="JavaScript" src="/includes/jscripts.js"></script>
<script language="JavaScript" src="/includes/jscripts2.js"></script>
<br /><br />
<table align="center" width="1000px" border="0" cellpadding="0" cellspacing="0">
<tr><td valign="top" align="left" height="100%" width="20%" bgcolor="#FFFFFF" style="border-right:solid 1px #BBBBBB;">
<div class="buttonscontainer">
    <div class="buttons_blog_title">
        <a href="http://www.rc.usf.edu">Research Computing</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Getting Started</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/circe.php">CIRCE</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/contact.php">Support &amp; Contacts</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki/SoftwarePortal">Available Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Documentation</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/signup/account.php">Get Account</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/licensing/licenserequest.php">Request Licensed Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://itrc-adm1.rc.usf.edu/ganglia">System Status</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://forum.rc.usf.edu">User Forum</a>
    </div>
     <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/rcac.php">Research Computing Advisory Committee</a>
    </div>
    <br /><br />
    <!-- SiteSearch Google -->
    <FORM method="GET" action="http://www.google.com/search">
        <input type="hidden" name="ie" value="UTF-8" />
        <input type="hidden" name="oe" value="UTF-8" />
        <TABLE bgcolor="#FFFFFF"><tr><td>
            Search this site
            <INPUT TYPE="text" name="q" size="10" maxlength="100" value=""></INPUT>
            <INPUT type="submit" name="btng" VALUE="Go"></INPUT>
            <input type="hidden" name="domains" value="www.rc.usf.edu" />
            <input type="hidden" name="sitesearch" value="www.rc.usf.edu" />
        </td></tr></TABLE>
    </FORM>
    <br /><br />
</div>
</td>
<td valign="top" height="100%" align="center" style="padding-left:20px;">
<div id="wiki_content">
    <div></div>
    <div></div>
    <div id="main">
      <div></div>
    <div id="content" class="wiki">
      <h1>Editing gridEngineUsers</h1>
      
  <form id="edit" action="/trac/doc/wiki/gridEngineUsers" method="post"><div><input type="hidden" name="__FORM_TOKEN" value="f237668d71f45094cfd61076" /></div>
    <fieldset class="iefix">
      <input type="hidden" name="from_editor" value="1" />
      <input type="hidden" name="action" value="edit" />
      <input type="hidden" name="version" value="47" />
      <input type="hidden" id="scroll_bar_pos" name="scroll_bar_pos" value="" />
      <div id="rows">
          <label for="editrows">Adjust edit area height:</label>
          <select size="1" name="editrows" id="editrows" tabindex="43">
            <option value="8">
              8
            </option><option value="12">
              12
            </option><option value="16">
              16
            </option><option value="20">
              20
            </option><option value="24">
              24
            </option><option value="28">
              28
            </option><option value="32">
              32
            </option><option value="36">
              36
            </option><option value="40" selected="selected">
              40
            </option>
          </select>
        <label for="sidebyside" title="Selecting and pressing 'Preview' enters a two-column [edit|preview] mode">
          Edit side-by-side
        </label>
        <input type="checkbox" name="sidebyside" id="sidebyside" />
      </div>
      <p><textarea id="text" class="wikitext trac-resizable" name="text" cols="80" rows="40">
= !GridEngine User's Guide =
----
[[PageOutline]]

This document will provide information on submitting jobs, removing jobs, checking job status, and interacting with the scheduler.

== Key Commands ==

|| '''Command'''        || Description ||
|| qsub [job_script] || Submit jobs.   Refer to '''man qsub''' to display detailed explanations for each available option.  These options can be added to the command line or to your submit script. ||
|| qstat             || Display the status of your jobs.  The man page for qstat will provide detailed explanations for each available option.  Useful options include: '''-u [user_name]''' to filter a single user; '''-g t''' to see how your parallel process has been distributed; '''-u *''' to see jobs for all users; '''-j [job_id]''' for detailed job information ||
|| qdel [job_id]     || Delete/stop jobs.  Again, the man page will provide further information.  To stop all of your jobs, issue '''qdel -u [your_user_name]'''.  To force the deletion of your job, issue '''qdel -f [job_id]''' ||
|| qs                || Display a status summary of the entire grid.  This displays total, used, and available slots per queue as well as the aggregate load average. ||

Complete command-line options can be found by issuing '''-help''' at the end of any of the above commands or by utilizing the manual pages, e.g. run '''man qsub'''

== Submitting Jobs ==
You will need to create a submit script to run your job on the cluster.  The submit script will specify what type of hardware you wish to run on, what priority your job has, what do do with console output, etc.  We will look at SGE submit scripts for Serial and Parallel jobs so that you may have a good understanding of how they work and what it is they do.

=== Submission for Serial Jobs ===
!GridEngine uses pre-processed shell scripts to submit jobs. SGE provides predefined variables to help integrate your process with the scheduler and the job dispatcher.  It is likely that you will need to pass options to !GridEngine to retieive statistical information, set job specifications, redirect your I/O, change your working directory, and possibly notify you of job failure or completion.  To set these options, you will need to pass arguments to qsub or you can embed these options in your submit file.

A simple job for SGE would look like this

{{{
date
}}}
It is a simple script that calls '''date''' on whatever machine SGE decides to run your job on. Let's have a look at another submit file that does the same thing:
{{{
#$ -cwd
#$ -N get_date
#$ -l h_rt=00:30:00

date
}}}

An overview of the options (following the character sequence "#$") is as follows:
 * `-N (name)`: Set job name for queue
 * `-cwd`: Set directory to current working directory
 * `-l h_rt=00:30:00`: Tell the scheduler that this process should only run for 30 minutes.  '''Note''': This request will become mandatory in the near future so that the scheduler will know when jobs will finish.

These options should be sufficient for the most basic serial jobs.  

With this file, we have specified our output file, the name of the job, and that SGE should execute this job from within the same directory as it was submitted.  Let us call this script `date.sh` and submit the job to the queue:

{{{
[user@login0 ~]$ qsub date.sh
Your job 77345 ("get_date") has been submitted
}}}

Let's now check the status of our job:
{{{
[user@login0 ~]$ qstat
job-ID  prior   name       user         state submit/start at     queue                          slots ja-task-ID 
-----------------------------------------------------------------------------------------------------------------
  77345 0.00000 get_date   brs          qw    05/25/2010 14:54:26                                    1
}}}

You can see job 77345 (as an example) listed in the output.  You can see it is in the state `qw` which means it is waiting to be dispatched pending the arrival of the next scheduler iteration OR when sufficient resources become available.

=== Submission for Parallel Jobs ===
Because many of the applications available for science and engineering are highly resource intensive, many of them have been "parallelized" in order to run on multiple pieces of hardware to divide the work load.  Most applications have standardized upon the MPI or MPI2 specification.  Since many of you will want to run your applications in parallel in order to take advantage of performance gains, you'll need to know how to create a job script for submitting such an applications.  !GridEngine provides "Parallel Environments" for interfacing your job with an MPI library and distributing it across a cluster.

Rather than explain everything all at once, here is a submit script for a parallel job:
{{{
#$ -N parallel-job
#$ -j y
#$ -o output.$JOB_ID
#$ -cwd
#$ -l pcpus=4,h_rt=08:00:00

mpirun -np $NSLOTS parallel-executable
}}}

Most of the submit directives (remember, those lines starting with "#$" ?) should already be familiar to you.  But you should also notice that we've added a few new directives:

 * `pcpus=4`: This specifies the number of CPUs you would like allocated for your job. 

 * `-o`: This can either be a file path or a directory path. Your standard output will either be written to the file specified or to a file in the path named `(job_name).o(job_id)`.

 * `-j y`: This tells !GridEngine to merge the output streams of your job, stdout and stderr, into a single file rather than putting it into two separate files.

Following the exact same steps for a serial job submission script that were described above, we can submit our parallel job script to the cluster using `qsub` and use `qstat` to view its execution status.

=== Interactive jobs ===
Interactive jobs can be run via the `qlogin` command. Please do not use `rlogin`, `rsh`, or `ssh` to access the nodes. If there are no free nodes available, SGE will notify you that the system is currently full and your interactive session will not be started. If you need immediate access to stop one of your processes from a running SGE job please contact us.  `qlogin` uses many of the same options that are available to submit scripts.  

=== Available Environment Variables ===
The following environment variables are defined by !GridEngine at run time.  They may be referenced in your submit scripts to add functionality to your code:
 * `$JOB_ID`: The job number assigned by the scheduler to your job
 * `$JOBDIR`: The directory your job is currently running in
 * `$USER`: The username of the person currently running the job
 * `$TMPDIR`: The directory containing informational files about the job e.g. the machines allocated to run the job, etc.
 * `$SGE_O_WORKDIR`: Similar to $JOBDIR
 * `$HOME`: User's home directory on execution machine
 * `$JOB_NAME`: The job name specified by -N option
 * `$HOSTNAME`: Name of execution host
 * `$TASK_ID`: You can submit array jobs. This would be the TASK number in the array job of the current task
 * `$SGE_CELL`: SGE cell that the job is currently running in
 * `$SGE_O_SHELL`: Invoking shell of the current SGE job
 * `$QUEUE`: Current running queue

== Storing !GridEngine Options ==
Commonly used options in submit scripts or calls to `qstat` can be stored in dot files within your home directory in order to prevent you from needlessly using them repeatedly.

=== `qstat` Options ===
Options for the `qstat` command may be stored in the `~/.sge_qstat` file, in your home directory.  This allows you to add default options to the `qstat` command.  An example of this follows:

==== ~/.sge_qstat ====
{{{
-u *
-g t
}}}

Adding these options to the `~/.sge_qstat` file ensures that the default call to `qstat` will show jobs for all users and provide a view of the process distribution throughout the cluster.  You can add any of the options defined in the `qstat` man pages to this file to make them defaults for your account.

=== `qsub` and Submit Script Options ===
Even more useful is the `~/.sge_request` file which stores default options for submit scripts and calls to `qsub`.  This is extremely useful for creating a consistent environment for your jobs.  In the following file, we have defined defaults for the treatment of STDOUT, STDERR, the name of the output files, to use the current working directory, and what shell I want.  These defaults will be used by all of your submit scripts unless overridden in the submit script itself.  Below is an example of an `~/.sge_request` file and an example submit script using those defaults:

==== ~/.sge_request ====
{{{
-cwd
-S /bin/bash
}}}

And now a job script.  Notice the lack of the above options as they are assumed from the `~/.sge_request` file:
{{{
#$ -N job_name
#$ -l h_rt=08:00:00,mps=2.0G,pcpus_min=12,pcpus_max=16

mpirun -np $NSLOTS my_parallel_executable
}}}

== External Resources ==
Additional information on job submission with Sun !GridEngine is available at

http://docs.sun.com/app/docs/doc/817-6117?q=N1GE</textarea>
      </p>
      <div id="help"><b>Note:</b> See <a href="/trac/doc/wiki/WikiFormatting">WikiFormatting</a> and
        <a href="/trac/doc/wiki/TracWiki">TracWiki</a> for help on editing wiki content.</div>
    </fieldset>
    <fieldset id="changeinfo">
      <legend>Change information</legend>
      <div id="changeinfo1">
        <div class="field">
          <label>Comment about this change (optional):<br />
            <input id="comment" type="text" name="comment" size="60" value="" />
          </label>
        </div>
      </div>
      <div id="changeinfo2" class="options">
        <label><input type="checkbox" name="readonly" id="readonly" />
          Page is read-only
        </label>
      </div>
    </fieldset>
    <div class="buttons">
        <input type="submit" name="preview" value="Preview Page" /> 
        <input type="submit" name="diff" value="Review Changes" /> 
        <input type="submit" id="save" name="save" value="Submit changes" /> 
      <input type="submit" name="cancel" value="Cancel" />
    </div>
  </form>

    </div>
    </div>
    <div></div>
</div>
</td></tr>
</table>
<div id="sitefooter">
    <br /><br />
</div>
</body>
</html>