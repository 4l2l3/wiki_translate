<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      Ansys (edit) – Research Computing Documentation
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/trac/doc/search" />
        <link rel="help" href="/trac/doc/wiki/TracGuide" />
        <link rel="start" href="/trac/doc/wiki" />
        <link rel="stylesheet" href="/trac/doc/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/doc/chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="f237668d71f45094cfd61076";
    </script>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/babel.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/search.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" /><script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#text").blur(function() {
          $("#scroll_bar_pos").val(this.scrollTop);
        }).get(0).scrollTop = $("#scroll_bar_pos").val();
        $("#editrows").change(function() {
          resizeTextArea("text", this.options[this.selectedIndex].value);
        });
      });
    </script>
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/style.css" />
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/homepage.css" />
<link rel="icon" type="image/ico" href="/favicon.ico" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="stylesheet" href="/includes/menu2.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="/trac/doc/chrome/site/style.css" />
</head>
  <body>
<div id="siteheader">
    <!-- Get rid of the old headers -->
    <div id="container">
        <div id="header2">
            <div id="banner2" valign="top">
                <div id="usf-logo" valign="top">
                    <img src="http://www.usf.edu/imagery/USF-Master-BANNER-art.jpg" width="600" height="86" border="0" usemap="#Map" />
                    <map name="Map" id="Map">
                        <area shape="rect" coords="12,11,347,75" href="/" />
                    </map>
                </div>
                <div id="container_search">
                    <ul>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://assistive.usablenet.com/tt/referrer"> Text-Only</a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="https://my.usf.edu/webapps/login/custom/bb_bb60/login.jsp?flag=1"> myUSF </a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="http://www.usf.edu/About-USF/azindex/index.asp"> A-Z Index </a> | </li>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://directory.acomp.usf.edu/?logo=1"> Directory</a></li>
                    </ul>
                    <form id="form1" value="Search" method="get" action="http://search.usf.edu/search" style="font-size:12px">
                        <input type="text" name="q" size="20" maxlength="256" value="" />
                        <input type="submit" name="btng" style="font-size:12px" value="Go" />
                        <input type="hidden" name="client" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="proxystylesheet" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="site" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="output" style="font-size:12px" value="xml_no_dtd" />
                        <input type="hidden" name="numgm" style="font-size:12px" value="5" />
                    </form>
                </div>
            </div>
            <div id="nav_topic">
                <ul id="nav_topic">
                    <li><a id="about" href="http://www.usf.edu/About-USF/index.asp">About USF</a></li>
                    <li><a id="academics" href="http://www.usf.edu/Academics/index.asp">Academics</a></li>
                    <li><a id="admissions" href="http://www.usf.edu/Admission/index.asp">Admissions</a></li>
                    <li><a id="campuslife" href="http://www.usf.edu/Campus-Life/index.asp">Campus Life</a></li>
                    <li><a id="research" href="http://www.usf.edu//Research/index.asp">Research</a></li>
                    <li><a href="http://system.usf.edu/">USF System</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script language="JavaScript" src="/includes/jscripts.js"></script>
<script language="JavaScript" src="/includes/jscripts2.js"></script>
<br /><br />
<table align="center" width="1000px" border="0" cellpadding="0" cellspacing="0">
<tr><td valign="top" align="left" height="100%" width="20%" bgcolor="#FFFFFF" style="border-right:solid 1px #BBBBBB;">
<div class="buttonscontainer">
    <div class="buttons_blog_title">
        <a href="http://www.rc.usf.edu">Research Computing</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Getting Started</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/circe.php">CIRCE</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/contact.php">Support &amp; Contacts</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki/SoftwarePortal">Available Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Documentation</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/signup/account.php">Get Account</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/licensing/licenserequest.php">Request Licensed Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://itrc-adm1.rc.usf.edu/ganglia">System Status</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://forum.rc.usf.edu">User Forum</a>
    </div>
     <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/rcac.php">Research Computing Advisory Committee</a>
    </div>
    <br /><br />
    <!-- SiteSearch Google -->
    <FORM method="GET" action="http://www.google.com/search">
        <input type="hidden" name="ie" value="UTF-8" />
        <input type="hidden" name="oe" value="UTF-8" />
        <TABLE bgcolor="#FFFFFF"><tr><td>
            Search this site
            <INPUT TYPE="text" name="q" size="10" maxlength="100" value=""></INPUT>
            <INPUT type="submit" name="btng" VALUE="Go"></INPUT>
            <input type="hidden" name="domains" value="www.rc.usf.edu" />
            <input type="hidden" name="sitesearch" value="www.rc.usf.edu" />
        </td></tr></TABLE>
    </FORM>
    <br /><br />
</div>
</td>
<td valign="top" height="100%" align="center" style="padding-left:20px;">
<div id="wiki_content">
    <div></div>
    <div></div>
    <div id="main">
      <div></div>
    <div id="content" class="wiki">
      <h1>Editing Ansys</h1>
      
  <form id="edit" action="/trac/doc/wiki/Ansys" method="post"><div><input type="hidden" name="__FORM_TOKEN" value="f237668d71f45094cfd61076" /></div>
    <fieldset class="iefix">
      <input type="hidden" name="from_editor" value="1" />
      <input type="hidden" name="action" value="edit" />
      <input type="hidden" name="version" value="52" />
      <input type="hidden" id="scroll_bar_pos" name="scroll_bar_pos" value="" />
      <div id="rows">
          <label for="editrows">Adjust edit area height:</label>
          <select size="1" name="editrows" id="editrows" tabindex="43">
            <option value="8">
              8
            </option><option value="12">
              12
            </option><option value="16">
              16
            </option><option value="20">
              20
            </option><option value="24">
              24
            </option><option value="28">
              28
            </option><option value="32">
              32
            </option><option value="36">
              36
            </option><option value="40" selected="selected">
              40
            </option>
          </select>
        <label for="sidebyside" title="Selecting and pressing 'Preview' enters a two-column [edit|preview] mode">
          Edit side-by-side
        </label>
        <input type="checkbox" name="sidebyside" id="sidebyside" />
      </div>
      <p><textarea id="text" class="wikitext trac-resizable" name="text" cols="80" rows="40">
= ANSYS =
[[PageOutline]]

== Description == 
ANSYS is an engineering package and support routine for general-purpose, finite-element analysis:  statics, mode frequency, stability analysis, heat transfer, magnetostatics, coupled field analysis, modeling, etc. ANSYS was developed and is supported by ANSYS, Inc.

 * [http://www.ansys.com/Products "ANSYS Software Products"]

== Version ==
 * '''14.0'''

== Authorized Users ==
 * `circe` account holders

== Platforms ==
 * `circe` cluster

== Running Ansys Jobs on the Cluster ==

=== Modules ===
Before running a job, you must first set up your environment properly. Here are the required module files:

 * apps/ansys/14.0

To run ANSYS on the cluster, ensure that you use `module add` prior to using any Ansys executables.  See [wiki:Modules] for more information.

=== Interactive Execution via NX ===
Run the following to get a 4 processor session for Ansys using the interactive GUI (NOTE: you must be logged into Circe via the NX client for this to work):

{{{
qrsh -l ppn=4,nodes=1 -display "$(hostname)${DISPLAY}" $(which ansysdis140) -g
}}}

To run Ansys Workbench using the GUI, use the following updated command:

{{{
qrsh -l ppn=4,nodes=1 -display "$(hostname)${DISPLAY}" $(which runwb2)
}}}

To run Ansys Fluent using the GUI, a few more steps must be taken, in addition to using another command sequence.

1.  You must take note of the CIRCE login node that you're presently logged into.  You should see something like '''[user@wh-520-5-24 ~]$'''.  The current valid hosts are wh-520-5-24, wh-520-5-25, wh-520-5-26, and wh-520-5-27.

2.  You must take note of the current X display that you're using so that it can be properly exported.  To do this, you'll run the command below and what you should expect to see on the shell:

{{{
[user@wh-520-5-27 ~]$ echo $DISPLAY
:7009.0
}}}

3.  You now have your display variables necessary to use the Ansys GUI on a compute node within the cluster.  You now need to run the command below:

{{{
qlogin -l ppn=4,nodes=1 
}}}

4.  If all goes well, you should see a message that states your session was established on a compute node:

{{{
qlogin -l ppn=4,nodes=1
Your job 290804 ("QLOGIN") has been submitted
waiting for interactive job to be scheduled ...
Your interactive job 290804 has been successfully scheduled.
Establishing builtin session to host wh-520-3-7 ...
}}}

5.  You'll now need to export the display variables taken from steps 1 and 2 above.  You'll run the following command:

{{{
export DISPLAY=wh-520-5-27:7009
}}}

6.)  The last step is to load the Ansys module as described above and then start Ansys Fluent by typing "fluent" on the console:

{{{
fluent
}}}


=== How to Submit Jobs ===
Provided are batch scripts for running ANSYS as a single processor and multi-processor job.  Most existing ANSYS scripts will run in parallel mode with no modification.  These scripts can be copied into your work directory (the folder with your input files and database files) so that you can submit batch processes to the queue.  For help on submitting jobs to the queue, see our [wiki:gridEngineUsers "GridEngine User's Guide"]

=== Serial Submit Script ===
{{{
#$ -N ansys_job_name
#$ -l h_rt=hh:mm:ss,aa_r=1
#$ -cwd

module add apps/ansys/14.0
ANSYS_OPTS="-p aa_r -dir `pwd` -b"
time ansysdis130 $ANSYS_OPTS &lt; $JOB_NAME
}}}

=== Multi-Threaded Parallel Submit Script ===
{{{
#$ -N ansys_job_name
#$ -l h_rt=hh:mm:ss,aa_r=1,aa_r_hpc=2,nodes=1,ppn=4
#$ -cwd

module add apps/ansys/14.0
ANSYS_OPTS="-p aa_r -dir `pwd` -b -np $NSLOTS"
time ansysdis140 $ANSYS_OPTS &lt; $JOB_NAME
}}}

=== Distributed Parallel (MPI) Submit Script ===
{{{
#$ -N ansys_job_name
#$ -l h_rt=hh:mm:ss,aa_r=2,aa_r_hpc=6,pcpus=8
#$ -cwd

module add apps/ansys/14.0
ANSYS_OPTS="-p aa_r -dir `pwd` -b -dis -machines $(cat $TMPDIR/machines.ansys)"
time ansysdis140 $ANSYS_OPTS &lt; $JOB_NAME
}}}

Where `$JOB_NAME` is set on the line `#$ -N ansys_job_name` and is the name of the input file you are using.  

== Licensing ==
Since we have a limited number of ANSYS licenses, you'll need to specify some options when running your job.  You can see how these options are set in the above sample scripts.

'''For 1-2 processor ANSYS jobs''', the option `aa_r` is all you need to be concerned with.  You can set this to one in either case.  This will insure that your job does not try to run when there are no licenses available and thus failing (potentially after waiting for some time in the queue... this can be aggravating).

'''For 3-8 processor ANSYS jobs''', you'll need to set `aa_r` to 2. You'll also need to set `aa_r_hpc` to `($NSLOTS-2)` or the number of processors minus two.  That figure, unfortunately, must be calculated and included before submitting your job as there is no automatic way to accomplish this.  This will be fixed in the next release of !GridEngine.  You can determine `feature` from this table:

==== Figure 1.a: ANSYS License Features ====
||'''Feature'''||'''Description''' ||
|| aa_mcad     || Academic Research ||
|| aa_r        || Academic Research * ||
|| aa_r_hpc    || HPC License ||

=== More Job Information ===
See the following for more detailed job submission information:
 * [wiki:gridEngineUsers "SGE User's Guide"]
 * [wiki:gridEnginePolicy "Scheduling and Dispatch Policies"]
 * [wiki:gridEngineTechn "Advanced Submit Techniques"]

=== Reporting Bugs ===
Report bugs to the IT Help Desk: mailto:help@usf.edu</textarea>
      </p>
      <div id="help"><b>Note:</b> See <a href="/trac/doc/wiki/WikiFormatting">WikiFormatting</a> and
        <a href="/trac/doc/wiki/TracWiki">TracWiki</a> for help on editing wiki content.</div>
    </fieldset>
    <fieldset id="changeinfo">
      <legend>Change information</legend>
      <div id="changeinfo1">
        <div class="field">
          <label>Comment about this change (optional):<br />
            <input id="comment" type="text" name="comment" size="60" value="" />
          </label>
        </div>
      </div>
      <div id="changeinfo2" class="options">
        <label><input type="checkbox" name="readonly" id="readonly" />
          Page is read-only
        </label>
      </div>
    </fieldset>
    <div class="buttons">
        <input type="submit" name="preview" value="Preview Page" /> 
        <input type="submit" name="diff" value="Review Changes" /> 
        <input type="submit" id="save" name="save" value="Submit changes" /> 
      <input type="submit" name="cancel" value="Cancel" />
    </div>
  </form>

    </div>
    </div>
    <div></div>
</div>
</td></tr>
</table>
<div id="sitefooter">
    <br /><br />
</div>
</body>
</html>