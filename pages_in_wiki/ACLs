<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      ACLs (edit) – Research Computing Documentation
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="search" href="/trac/doc/search" />
        <link rel="help" href="/trac/doc/wiki/TracGuide" />
        <link rel="start" href="/trac/doc/wiki" />
        <link rel="stylesheet" href="/trac/doc/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/trac/doc/chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/trac/doc/chrome/common/trac.ico" type="image/x-icon" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="f237668d71f45094cfd61076";
    </script>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/babel.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/trac.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/search.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/trac/doc/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/trac/doc/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" /><script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#text").blur(function() {
          $("#scroll_bar_pos").val(this.scrollTop);
        }).get(0).scrollTop = $("#scroll_bar_pos").val();
        $("#editrows").change(function() {
          resizeTextArea("text", this.options[this.selectedIndex].value);
        });
      });
    </script>
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/style.css" />
<link rel="stylesheet" type="text/css" media="screen, print" href="/includes/homepage.css" />
<link rel="icon" type="image/ico" href="/favicon.ico" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="stylesheet" href="/includes/menu2.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="/trac/doc/chrome/site/style.css" />
</head>
  <body>
<div id="siteheader">
    <!-- Get rid of the old headers -->
    <div id="container">
        <div id="header2">
            <div id="banner2" valign="top">
                <div id="usf-logo" valign="top">
                    <img src="http://www.usf.edu/imagery/USF-Master-BANNER-art.jpg" width="600" height="86" border="0" usemap="#Map" />
                    <map name="Map" id="Map">
                        <area shape="rect" coords="12,11,347,75" href="/" />
                    </map>
                </div>
                <div id="container_search">
                    <ul>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://assistive.usablenet.com/tt/referrer"> Text-Only</a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="https://my.usf.edu/webapps/login/custom/bb_bb60/login.jsp?flag=1"> myUSF </a> | </li>
                        <li id="header_maps_item"><a style="font-size:11px" href="http://www.usf.edu/About-USF/azindex/index.asp"> A-Z Index </a> | </li>
                        <li id="header_atoz_index"><a style="font-size:11px" href="http://directory.acomp.usf.edu/?logo=1"> Directory</a></li>
                    </ul>
                    <form id="form1" value="Search" method="get" action="http://search.usf.edu/search" style="font-size:12px">
                        <input type="text" name="q" size="20" maxlength="256" value="" />
                        <input type="submit" name="btng" style="font-size:12px" value="Go" />
                        <input type="hidden" name="client" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="proxystylesheet" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="site" style="font-size:12px" value="tampa" />
                        <input type="hidden" name="output" style="font-size:12px" value="xml_no_dtd" />
                        <input type="hidden" name="numgm" style="font-size:12px" value="5" />
                    </form>
                </div>
            </div>
            <div id="nav_topic">
                <ul id="nav_topic">
                    <li><a id="about" href="http://www.usf.edu/About-USF/index.asp">About USF</a></li>
                    <li><a id="academics" href="http://www.usf.edu/Academics/index.asp">Academics</a></li>
                    <li><a id="admissions" href="http://www.usf.edu/Admission/index.asp">Admissions</a></li>
                    <li><a id="campuslife" href="http://www.usf.edu/Campus-Life/index.asp">Campus Life</a></li>
                    <li><a id="research" href="http://www.usf.edu//Research/index.asp">Research</a></li>
                    <li><a href="http://system.usf.edu/">USF System</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script language="JavaScript" src="/includes/jscripts.js"></script>
<script language="JavaScript" src="/includes/jscripts2.js"></script>
<br /><br />
<table align="center" width="1000px" border="0" cellpadding="0" cellspacing="0">
<tr><td valign="top" align="left" height="100%" width="20%" bgcolor="#FFFFFF" style="border-right:solid 1px #BBBBBB;">
<div class="buttonscontainer">
    <div class="buttons_blog_title">
        <a href="http://www.rc.usf.edu">Research Computing</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Getting Started</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/circe.php">CIRCE</a>
    </div>
    <div class="buttons_blog_item">
        <a href="/contact.php">Support &amp; Contacts</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki/SoftwarePortal">Available Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/trac/doc/wiki">Documentation</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/signup/account.php">Get Account</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/licensing/licenserequest.php">Request Licensed Software</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://itrc-adm1.rc.usf.edu/ganglia">System Status</a>
    </div>
    <div class="buttons_blog_item">
        <a href="http://forum.rc.usf.edu">User Forum</a>
    </div>
     <div class="buttons_blog_item">
        <a href="http://www.rc.usf.edu/rcac.php">Research Computing Advisory Committee</a>
    </div>
    <br /><br />
    <!-- SiteSearch Google -->
    <FORM method="GET" action="http://www.google.com/search">
        <input type="hidden" name="ie" value="UTF-8" />
        <input type="hidden" name="oe" value="UTF-8" />
        <TABLE bgcolor="#FFFFFF"><tr><td>
            Search this site
            <INPUT TYPE="text" name="q" size="10" maxlength="100" value=""></INPUT>
            <INPUT type="submit" name="btng" VALUE="Go"></INPUT>
            <input type="hidden" name="domains" value="www.rc.usf.edu" />
            <input type="hidden" name="sitesearch" value="www.rc.usf.edu" />
        </td></tr></TABLE>
    </FORM>
    <br /><br />
</div>
</td>
<td valign="top" height="100%" align="center" style="padding-left:20px;">
<div id="wiki_content">
    <div></div>
    <div></div>
    <div id="main">
      <div></div>
    <div id="content" class="wiki">
      <h1>Editing ACLs</h1>
      
  <form id="edit" action="/trac/doc/wiki/ACLs" method="post"><div><input type="hidden" name="__FORM_TOKEN" value="f237668d71f45094cfd61076" /></div>
    <fieldset class="iefix">
      <input type="hidden" name="from_editor" value="1" />
      <input type="hidden" name="action" value="edit" />
      <input type="hidden" name="version" value="9" />
      <input type="hidden" id="scroll_bar_pos" name="scroll_bar_pos" value="" />
      <div id="rows">
          <label for="editrows">Adjust edit area height:</label>
          <select size="1" name="editrows" id="editrows" tabindex="43">
            <option value="8">
              8
            </option><option value="12">
              12
            </option><option value="16">
              16
            </option><option value="20">
              20
            </option><option value="24">
              24
            </option><option value="28">
              28
            </option><option value="32">
              32
            </option><option value="36">
              36
            </option><option value="40" selected="selected">
              40
            </option>
          </select>
        <label for="sidebyside" title="Selecting and pressing 'Preview' enters a two-column [edit|preview] mode">
          Edit side-by-side
        </label>
        <input type="checkbox" name="sidebyside" id="sidebyside" />
      </div>
      <p><textarea id="text" class="wikitext trac-resizable" name="text" cols="80" rows="40">
= File Permissions =
[[PageOutline]]
File permissions on Circe determine which users can access your files or directories.  
== Overview ==
Generally, it is desired that only YOU should have access to your files.  Given this general requirement, all home directories are set with the following permissions:
{{{
[jdoe@login0 ~]$ ls -ld ~jdoe
drwx--x---+ 4 jdoe usfuser 4096 Mar  1 12:00 /home/j/jdoe
}}}

This says that only user jdoe can access the directory /home/b/brs.  There is also an x under the group field.  This can be safely ignored as it is used by the ACL (Access Control List) system.  By default, each directory has one ACL applied to it:
{{{
[jdoe@login0 ~]$ acltool show ~jdoe
# file: /home/j/jdoe
USER   jdoe      rwx     
user   apache    --x     
GROUP  usfuser   ---     
mask             --x     
other            ---     

}}}

The special user, `apache`, is granted execute permissions on your directory so that if you have a personal web page in ~/public_html, it will be able to access those files.  These permissions ensure that only you and the special `apache` user have access to any part of your home directory.

By default, when you create a file or directory, it will be created with the default permissions where only you can read or write to that file.  

== Sharing Files ==
To share a file that exists in the top-level of your home directory, e.g. `~/.bash_profile`, with another user, you can simply run:
{{{
[jdoe@login0 ~]$ acltool grant user:jane r ~/.bash_profile
}}}
I'd like my friend, jane, to be able to see some neat things I've added to my ~/.bash_profile, so I've shared it with her.  She wont be able to 
{{{
[jane@login0 ~]$ cd ~jdoe
[jane@login0 jdoe]$ ls
ls: .: Permission denied
}}}
see my files, but she will be able to see the file I shared with her:
{{{
[jane@login0 ~]$ cat .bash_profile
...
...
...
}}}

== Sharing Directories ==
For directory trees, the same is true:
{{{
[jdoe@login0 ~]$ acltool grant group:admin rw ~/documents/admin
}}}

I've provided read-write access to the admin group of the ~/documents/admin folder under my home directory.  The admin users will not be able to see files in ~/ or ~/documents, but they will be able to read and write files inside of ~/documents/admin.

== Revoking Access ==
Let's say I no longer want Jane to see my ~/.bash_profile.  I can run the following command to get rid of this access:
{{{
[jdoe@login0 ~]$ acltool revoke user:jane ~/.bash_profile
}}}
If Jane does not have access to any other files or directories in my home directory, I can remove all ACLs leading up to the file, too:
{{{
[jdoe@login0 ~]$ acltool revokeall user:jane ~/.bash_profile
}}}
I'll also revoke all access to the admin group while I'm at it:
{{{
[jdoe@login0 ~]$ acltool revokeall group:admin ~/documents/admin
}}}

== Displaying Current ACLs ==
I'd like to see who has access to my ~/documents directory.  To do this, I can run
{{{
[brs@login0 ~]$ acltool show documents
# file: /home/j/jdoe/documents
USER   jdoe      rwx     
GROUP  usfuser   ---     
other            ---     

# file: /home/j/jdoe
USER   jdoe      rwx     
user   apache    --x          
GROUP  usfuser   ---     
mask             --x     
other            ---     
}}}

I'll give my friend Dan read access to this folder and its files:
{{{
[jdoe@login0 ~]$ acltool grant user:dan r documents
[jdoe@login0 ~]$ acltool show documents/
# file: /home/j/jdoe/documents
USER   jdoe      rwx     
user   dan       r-x     
GROUP  usfuser   ---     
mask             r-x     
other            ---     

# file: /home/j/jdoe
USER   jdoe      rwx     
user   apache    --x     
user   dan       --x          
GROUP  usfuser   ---     
mask             --x     
other            ---     

}}}
You may notice that when the permissions are dumped for directories, there is always at least an 'x' permission.  This is normal.  Without this permission, a user would not be able to change into that directory, which would make sharing the files impossible.

You may also notice that `acltool show` dumps out the permissions of the parent directory as well.  This is important since your parent directories need to provide enough access to the child directories that you are sharing.

== Removing all ACLs from a File or Directory ==
Let's say you want to remove all ACLs from a given file or directory:
{{{
acltool reset ~/.bash_profile
}}}
or
{{{
acltool reset ~/documents
}}}
will remove any and all ACLs from the file ~/.bash_profile and the directory ~/documents and all files inside of ~/documents

== Resetting ACLs to System Defaults ==
Its possible that you may want to remove all ACLs from files and directories under your home directory.  To do this, run
{{{
[jdoe@login0 ~]$ acltool defaults
This will completely remove ALL ACLs on your home directory!!! Do you wish to continue (Y/N)? Y
}}}

== Caveats ==
1. Never grant write access to your home directory itself.  It will break things like SSH and is very insecure.  The following is a big NO-NO
{{{
[jdoe@login0 ~]$ acltool grant user:jane rw ~jdoe
}}}

2. Only add ACLs to files or directories '''within''' your home directory and '''not''' to your home directory itself.  This is a much safer practice and much less prone to error.</textarea>
      </p>
      <div id="help"><b>Note:</b> See <a href="/trac/doc/wiki/WikiFormatting">WikiFormatting</a> and
        <a href="/trac/doc/wiki/TracWiki">TracWiki</a> for help on editing wiki content.</div>
    </fieldset>
    <fieldset id="changeinfo">
      <legend>Change information</legend>
      <div id="changeinfo1">
        <div class="field">
          <label>Comment about this change (optional):<br />
            <input id="comment" type="text" name="comment" size="60" value="" />
          </label>
        </div>
      </div>
      <div id="changeinfo2" class="options">
        <label><input type="checkbox" name="readonly" id="readonly" />
          Page is read-only
        </label>
      </div>
    </fieldset>
    <div class="buttons">
        <input type="submit" name="preview" value="Preview Page" /> 
        <input type="submit" name="diff" value="Review Changes" /> 
        <input type="submit" id="save" name="save" value="Submit changes" /> 
      <input type="submit" name="cancel" value="Cancel" />
    </div>
  </form>

    </div>
    </div>
    <div></div>
</div>
</td></tr>
</table>
<div id="sitefooter">
    <br /><br />
</div>
</body>
</html>